FROM centos:latest

RUN yum -y install epel-release
RUN yum -y update
RUN yum -y install wget

ENV container docker

# Install Java
RUN yum -y install java-1.8.0-openjdk.x86_64

RUN cp /etc/profile /etc/profile_backup
RUN echo 'export JAVA_HOME=/usr/lib/jvm/jre-1.8.0-openjdk' |  tee -a /etc/profile
RUN echo 'export JRE_HOME=/usr/lib/jvm/jre' |  tee -a /etc/profile
RUN source /etc/profile

RUN echo $JAVA_HOME
RUN echo $JRE_HOME

RUN wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
RUN rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key
RUN yum -y install jenkins

#RUN systemctl start jenkins.service
#RUN systemctl enable jenkins.service

#RUN firewall-cmd --zone=public --permanent --add-port=8080/tcp
#RUN firewall-cmd --reload